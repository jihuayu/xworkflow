{
  "version": "0.1.0",
  "nodes": [
    { "id": "start", "data": { "type": "start", "title": "Start" } },
    {
      "id": "code_fail",
      "data": {
        "type": "code",
        "title": "Failing Code",
        "code": "function main(inputs) { throw new Error('boom'); }",
        "language": "javascript"
      }
    },
    {
      "id": "end",
      "data": {
        "type": "end",
        "title": "End",
        "outputs": [
          { "variable": "result", "value_selector": ["code_fail", "result"] }
        ]
      }
    }
  ],
  "edges": [
    { "source": "start", "target": "code_fail" },
    { "source": "code_fail", "target": "end" }
  ],
  "error_handler": {
    "mode": "recover",
    "sub_graph": {
      "nodes": [
        { "id": "eh_start", "type": "start", "title": "EH Start", "data": {} },
        {
          "id": "eh_tmpl",
          "type": "template-transform",
          "title": "EH Template",
          "data": {
            "template": "type={{ error_type }}, node={{ node_id }}",
            "variables": [
              { "variable": "error_type", "value_selector": ["sys", "error_type"] },
              { "variable": "node_id", "value_selector": ["sys", "error_node_id"] }
            ]
          }
        },
        {
          "id": "eh_end",
          "type": "end",
          "title": "EH End",
          "data": {
            "outputs": [
              { "variable": "result", "value_selector": ["eh_tmpl", "output"] }
            ]
          }
        }
      ],
      "edges": [
        { "source": "eh_start", "target": "eh_tmpl" },
        { "source": "eh_tmpl", "target": "eh_end" }
      ]
    }
  }
}
