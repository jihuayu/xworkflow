# Advanced: Multiple nested if-else branches.
# File: Workflow DSL definition

version = "0.1.0"
[[nodes]]
id = "start"

[nodes.data]
type = "start"
title = "Start"
[[nodes.data.variables]]
variable = "score"
label = "Score"
type = "number"
required = true

[[nodes]]
id = "ifelse1"

[nodes.data]
type = "if-else"
title = "Grade Check"

[[nodes.data.cases]]
[nodes.data.cases.conditions]
variable_selector = [ "start", "score",]
comparison_operator = "greater_than_or_equal"
value = 90

[[nodes.data.cases]]
[nodes.data.cases.conditions]
variable_selector = [ "start", "score",]
comparison_operator = "greater_than_or_equal"
value = 80

[[nodes.data.cases]]
[nodes.data.cases.conditions]
variable_selector = [ "start", "score",]
comparison_operator = "greater_than_or_equal"
value = 70

[[nodes]]
id = "grade_a"

[nodes.data]
type = "template-transform"
title = "Grade A"
template = "Excellent"

[[nodes]]
id = "grade_b"

[nodes.data]
type = "template-transform"
title = "Grade B"
template = "Good"

[[nodes]]
id = "grade_c"

[nodes.data]
type = "template-transform"
title = "Grade C"
template = "Average"

[[nodes]]
id = "grade_f"

[nodes.data]
type = "template-transform"
title = "Grade F"
template = "Needs Improvement"

[[nodes]]
id = "ifelse2"

[nodes.data]
type = "if-else"
title = "Pass/Fail"

[[nodes.data.cases]]
[nodes.data.cases.conditions]
variable_selector = [ "start", "score",]
comparison_operator = "greater_than_or_equal"
value = 60

[[nodes]]
id = "pass"

[nodes.data]
type = "template-transform"
title = "Pass"
template = "Passed"

[[nodes]]
id = "fail"

[nodes.data]
type = "template-transform"
title = "Fail"
template = "Failed"

[[nodes]]
id = "agg"

[nodes.data]
type = "variable-aggregator"
title = "Combine"

[[nodes.data.variables]]
variable = "grade"
value_selector = [ "grade_a", "output",]

[[nodes.data.variables]]
variable = "grade"
value_selector = [ "grade_b", "output",]

[[nodes.data.variables]]
variable = "grade"
value_selector = [ "grade_c", "output",]

[[nodes.data.variables]]
variable = "grade"
value_selector = [ "grade_f", "output",]

[[nodes.data.variables]]
variable = "status"
value_selector = [ "pass", "output",]

[[nodes.data.variables]]
variable = "status"
value_selector = [ "fail", "output",]

[[nodes]]
id = "end"

[nodes.data]
type = "end"
title = "End"
[[nodes.data.outputs]]
variable = "grade"
value_selector = [ "agg", "grade",]
[[nodes.data.outputs]]
variable = "status"
value_selector = [ "agg", "status",]

[[edges]]
source = "start"
target = "ifelse1"

[[edges]]
source = "ifelse1"
target = "grade_a"
source_handle = "0"

[[edges]]
source = "ifelse1"
target = "grade_b"
source_handle = "1"

[[edges]]
source = "ifelse1"
target = "grade_c"
source_handle = "2"

[[edges]]
source = "ifelse1"
target = "grade_f"
source_handle = "false"

[[edges]]
source = "start"
target = "ifelse2"

[[edges]]
source = "ifelse2"
target = "pass"
source_handle = "true"

[[edges]]
source = "ifelse2"
target = "fail"
source_handle = "false"

[[edges]]
source = "grade_a"
target = "agg"

[[edges]]
source = "grade_b"
target = "agg"

[[edges]]
source = "grade_c"
target = "agg"

[[edges]]
source = "grade_f"
target = "agg"

[[edges]]
source = "pass"
target = "agg"

[[edges]]
source = "fail"
target = "agg"

[[edges]]
source = "agg"
target = "end"
